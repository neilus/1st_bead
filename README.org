#+title: Programozási technológia 1.
#+subtitle: 1. beadanó
#+author: Sana Norbert
#+email: neilus@elte.hu

#+lang: hun
#+toc: 2



* 1. Feladat

Egy többnapos versenyen lények vesznek részt. Ki nyeri a versenyt, 
azaz melyik lény teszi meg a legnagyobb távolságot úgy, hogy
 közben _életben marad?_ Kezdetben minden lény valamennyi vízzel 
rendelkezik, és a megtett távolsága 0. A verseny során háromféle nap
 lehetséges: /napos/, /felhős/ és /esős/. Ezekre a különböző fajtájú 
lények eltérő módon reagálnak vizfogyasztás és haladás szempontjából.
 Minden lény először a rendelkezésre álló víz mennyiségét változtatja meg,
 ezután ha tud, mozog. Bármely lény elpusztul, ha a vize elfogy (0 lesz az érték),
 ezután értelemszerűen semmilyen tevékenységre sem képes.
Minden lény jellemzői:
- az _egyedi neve (string)_,
- a _rendelkezésre álló víz mennyisége (egész)_,
- a _maximálisan tárolható víz mennyisége (egész)_,
- hogy _él-e (logikai)_,
- illetve az _eddig megtett távolság (egész)_.
 A versenyen részt vevő lények fajtái a következők:
 =homokjáró, szivacs, lépegető=.
A következő táblázat tartalmazza az egyes fajták jellemzőit:

| fajta     |       | víz változtatás |      |       | távolság |      | max víz |
|-----------+-------+-----------------+------+-------+----------+------+---------|
|           | napos |          felhős | esős | napos |   felhős | esős |         |
|-----------+-------+-----------------+------+-------+----------+------+---------|
| homokjáró |    -1 |               0 |    3 |     3 |        1 |    0 |       8 |
| szivacs   |    -4 |              -1 |    6 |     0 |        1 |    3 |      20 |
| lépegető  |    -2 |              -1 |    3 |     1 |        2 |    1 |      12 |

Az egyes lények a vízkészlet megváltoztatása során 
nem léphetik túl a fajtára jellemző maximális értéket,
 legfeljebb azt érhetik el.

A program egy szövegfájlból olvassa be a verseny adatait! 
Az első sorban az induló lények száma szerepel. A következő 
sorok tartalmazzák a lények adatait szóközökkel elválasztva: 
=a lény nevét, a fajtáját és a kezdetben a rendelkezésre álló víz mennyiségét=.
A fajtát egy karakter azonosít: =h - homokjáró, s - szivacs, l - lépegető=.

A lényeket leíró részt követő sorban a verseny napjai szerepelnek egy karaktersorozatban.
Az egyes jelek értelmezése: =n - napos, f - felhős, e - esős=.

A program kérje be a fájl nevét, majd jelenítse meg a nyertes nevét!
(Feltehetjük, hogy a fájl formátuma helyes) Egy lehetséges bemenet:

#+begin_src text
4
Vandor h 4
Seta l 7
Csuszo s 12
Siklo s 10
nffeeennf
#+end_src

(Javaslat: Hozza létre az absztrakt lény osztályt, amelyből 
származtatja a homokjáró, szivacs és lépegető osztályokat.
A konstruktor paramétere legyen a név és a kezdeti víz mennyisége.
Vezessen be három műveletet a napoknak /(napos, felhős, esős)/ amelyek
a vízfogyasztást az élet vizsgálatával együtt, illetve mozgatják a lényt.
A végeredmény meghatározásához kell még 3 művelet: 
- él-e a lény,
- a név illetve
- a megtett távolság lekérdezése)


* TODO [#A] Megoldási terv

** DONE Osztályok és kapcsolataik

#+begin_src plantuml :file osztaly_diagramm.png :exports results
@startuml
Leny <|-- Homokjaro
Leny <|-- Lepegeto
Leny <|-- Szivacs

Nap -left--+ Leny
Faj -right--+ Leny

enum Nap {
 +n
 +f
 +e
}

enum Faj {
 +h
 +s
 +l
}

class Leny {
 -{static}format:String
 -living:boolean
 -name:String
 -distance:int
 -water:int

 --konstruktor--
 +Leny(name:String, water:int)
 __belső működés__
 #move(int):Leny
 #saveWater(int):Leny
 #consumeWater(int):Leny
 #die():Leny

 ..Absztrakt metódusok...
 ~{abstract}getMaxWater():int
 +{abstract}napos():Leny
 +{abstract}felhos():Leny
 +{abstract}esos():Leny

 ..Getterek...
 +getWater():int
 +getName():String
 +getDistance():int
 +isLiving():boolean

 --megjelenítéshez segéd--
 +{static}header():String
 +{static}footer():String
 +toString():String
 
}

class Lepegeto {
 -maxWater:int

 --konstruktorok--
 ~Lepegeto()
 +Lepegeto(name:String, water:int)

 ..műveletek..
 +napos():Leny
 +felhos():Leny
 +esos():Leny

 ..állapotlekérdező..
 ~getMaxWater():int
}

class Homokjaro {
 -maxWater:int

 --konstruktorok--
 ~Lepegeto()
 +Lepegeto(name:String, water:int)

 ..műveletek..
 +napos():Leny
 +felhos():Leny
 +esos():Leny

 ..állapotlekérdező..
 ~getMaxWater():int
}

class Szivacs {
 -maxWater:int

 --konstruktorok--
 ~Lepegeto()
 +Lepegeto(name:String, water:int)

 ..műveletek..
 +napos():Leny
 +felhos():Leny
 +esos():Leny

 ..állapotlekérdező..
 ~getMaxWater():int
}

@enduml
#+end_src

#+RESULTS:
[[osztaly_diagramm.png]]


* DONE [#B] A megoldáshoz szükséges típusok absztrakt leírása

** Leny absztrakt osztály

A Leny osztály tartalmazza a leszármaztatott osztályok működési logikájának vázát, valamint további segéd-függvényeket (move, saveWater, consumeWater, die) és emun adatszerkezeteket (Nap, Faj).

*** Egyedállapotot tartalmazó attribútumok
Az attribútumok értékeit a hozzájuk tartozó getter (isser) metódusokkal lehet lekérdezni az objektumtól, melyek értékeit a konstruktor inicializálja és a napoknak megfelelően változhat a verseny során.

**** living
Ez a boolean változó tárolja azt az információt, hogy az objektum példány éppen él-e, aminek következtében még versenyben lehet vagy sem, illetve tud-e még mozogni, vizet fogyasztani, raktározni.

Ezt a konstruktorból inicializáljuk /true/ értékkel és a [[die]] metódus állítja /false/-ra.

**** name
Ez az egyedpéldány nevét tartalmazza, melyet a konstruktorban van lehetőségünk beállítani.

**** distance
A verseny során megtett távolságot tárolja.


*** Segédfüggvények
Ezeket a segédfüggvényeket a leszármazott osztályok használják, legfőképp az absztrakt metódusok implementációjának egyszerűsítésére szolgálnak.

**** move
A kapott int paraméter értékével mozgatja előre a lényünket.

**** saveWater
A kapott int paraméternyi mennyiségű vizet próbál meg elraktározni a lényünk számára. Ha a lény a paramétereinek megfelően elraktározta a maximálisan elraktározható vízmennyiséget, akkor nem raktároz el több vizet.

**** consumeWater
A kapott int paraméternyi vizet fogyaszt el a lény raktározott vizéből. Ha elfogyott a vize, a [[die]] metódussal megöli a lényünket.

**** die
Megöli a lényünket, [[living]] attribútumának false-ra állításával.
     
*** Absztrakt metódusok
Ezek a metódusok a leszármazott osztályokban vannak implementálva különféle képpen tükrözve az adott faj paramétereit.
**** getMaxWater
Megmondja mennyi a maximálisan elraktározható víz a faj számára.
**** napos
Lejátsza a fajnak napos napi magatartását.
**** felhos
Lejátsza a fajnak felhős napi magatartását.
**** esos
Lejátsza a fajnak esős napi magatartását.
**** getSavingByDay, getConsumptionByDay, getDistanceByDay
A megadott [[Nap]]ra vonatkozó adott fajra vonatkozó karakterisztikát lehet vele lekérdezni.
*** Enum Nap
A különböző napokra (napos, felhős, esős) vonatkozó konstansok tárolására szolgál, valamint egyszerűsíti a szekvenciális input fájlból való adatbeolvasást. A getValue() metódusa segítségével lehet egyszerűen lekérni a napnak megfelelő int értéket, mely pl a fajra vonatkozó karakterisztikák lekérdezésénél jön kapóra.
*** Enum Faj
A különböző fajok megkülönböztetésére szolgál az input fájlból való olvasáskor hasznos.

** DONE Homokjaro, Lepegeto es Szivacs osztályok
A fajra vonatkozó karakterisztikákat tárolja (maxWater, savedWater, consumedWater, moveDistance), valamint a különböző napokra jellemző faji magatartást.

* TODO [#B] Tesztelési terv

** TODO White-Box unit tesztek
A White-Box tesztekhez a [[http://junit.org/junit4/][JUnit]] frameworköt használtam, mely a tesztek eredményéről html formátumú jelentést készít.
** TODO Black-Box acceptance tesztek
A Black-Box tesztek implementálásához a [[http://robotframework.org/][ROBOT]] frameworköt használtam, mely a tesztek eredményeiről és futásáról html formátumú jelentést készít.
